# -----------------------------------------------------------------------------
# Akeyless Gateway .env
# Purpose: keep values here; docker compose / k8s manifests read from this file.
# Docs: https://docs.akeyless.io/docs
# NOTE: JSON-like values should remain a single line with no spaces unless quoted.
# -----------------------------------------------------------------------------

# ===== 1) Core cluster & mode =====
CLUSTER_NAME=XXXXXX                       # Must match your Akeyless cluster name
UNIFIED_GATEWAY=true                      # Enable unified Gateway mode (SRA + Gateway in one pod)
VERSION=""                                   # Optional: set a specific image tag; empty = pull default/latest

# ===== 2) Observability =====
ENABLE_METRICS=false                      # "true" to expose Gateway metrics (Prometheus scrape, etc.)

# ===== 3) Authentication to Akeyless (required) =====
GATEWAY_ACCESS_ID="p-************"        # The Access ID to authenticate the Gateway
GATEWAY_ACCESS_TYPE="******"              # REQUIRED for SRA. One of: access_key/password/saml/ldap/k8s/azure_ad/oidc/aws_iam/universal_identity/jwt/gcp/cert/oci/kerberos
GATEWAY_ACCESS_KEY="********"               # Access key/secret/token as applicable to the access type

# ===== 4) Delegated / scoped access =====
ALLOWED_ACCESS_PERMISSIONS='[{"name":"XXXX","access_id":"p-XXXXX","permissions":["admin"]}]'
# A list of Access IDs and their permissions the Gateway may act on behalf of.

# ===== 5) TLS manager / configuration =====
ENABLE_TLS_CONFIGURE=true                 # Enables TLS configuration management for the Gateway
# If you manage TLS externally (ingress/proxy) leave volumes unmounted for cert/key.
# If set to true, ensure the corresponding cert/key configuration is provided.

# ===== 6) Caching controls =====
# If you want to turn OFF caching, set USE_CLUSTER_CACHE=false and GATEWAY_CLUSTER_CACHE=disable.

GATEWAY_CLUSTER_CACHE="enable"              # Cluster cache toggle for Gateway ("enable"/"disable")
USE_CLUSTER_CACHE="true"                    # Use Redis-backed cluster cache
PREFER_CLUSTER_CACHE_FIRST="true"           # Prefer cached reads before remote fetch where applicable
PROACTIVE_CACHE_ENABLE="false"              # Legacy/alt flag – keep as provided
NEW_PROACTIVE_CACHE_ENABLE="true"           # Newer proactive cache flag – keep as provided
PRO_ACTIVE_CACHE_ENABLE="true"              # Alias/legacy flag – keep as provided
#CUSTOMER_FRAGMENTS='{"customer_fragments": [{"id": "cf-*************","value": "4zm7UXxpkm********************************************XuOAI3riEA=="}]}'
#ENABLE_CACHE_TLS=false
# ^ These proactive flags can overlap across versions. Keep as-is unless support instructs otherwise.

# ===== 7) Redis (internal network only when cache is enabled) =====
REDIS_ADDR=akeyless-cache:6379               # Host:port for Redis (use internal DNS/service)
REDIS_PASS=password                       # Redis auth (use a strong secret in production)

# ===== 8) Default SRA Gateway Section  =====
REMOTE_ACCESS_WEB_SERVICE_INTERNAL_URL="http://akeyless-sra-web:8888"
REMOTE_ACCESS_SSH_SERVICE_INTERNAL_URL="http://akeyless-sra-ssh:9900"

# -----------------------------------------------------------------------------
# End of file
# -----------------------------------------------------------------------------

# Reference (for readers):
# CLUSTER_NAME: The name of your Akeyless cluster (must match what's configured in Akeyless).
# GATEWAY_ACCESS_ID / GATEWAY_ACCESS_KEY: Credentials obtained from the Akeyless console.
# GATEWAY_ACCESS_TYPE: e.g., "k8s", "docker", or another deployment type.
# GATEWAY_AUTHORIZED_ACCESS_ID: Additional Access ID for delegated or extended usage.
# VERSION: Which Gateway Docker image version/tag to pull (e.g. "latest"). Can be empty or with specific version.
# ENABLE_METRICS: Set to "true" or "false" to enable metrics in the Gateway.
# GATEWAY_CLUSTER_CACHE: Should remain "enable" if using Redis caching.
# For more detailed information, refer to: https://docs.akeyless.io/docs
